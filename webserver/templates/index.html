<!DOCTYPE html>
<html class="{{ door_state }}">
<head>
    <title>Doortron</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="refresh" content="30">

    <style>
        :root.unknown {
            --bg: #444;
            --fg: white;
        }
        :root.open {
            --bg: #006400;
            --fg: white;
        }
        :root.closed {
            --bg: #8b0000;
            --fg: white;
        }

        :root {
            color: var(--fg);
            background: var(--bg);
            font-family: sans-serif;
        }

        p {
            width: 100%;
            text-align: center;
            margin-top: 0;
            margin-bottom: 15pt;
            font-size: 15pt;
        }

        table {
            margin: 0 auto;
            overflow-y: scroll;
        }

        td {
            width: 6em;
            height: 1em;
        }

        .top {
            font-weight: bold;
            font-size: 35pt;
        }

        .bottom {
            font-weight: bold;
            font-size: 65pt;
        }
    </style>
</head>

<body>
    <div>
        {% if door_state == "unknown" %}
            <p>
                The DoorTron system is currently offline, if this persists for more than 5 minutes please notify an officer
            </p>
        {% else %}
            <p class="top">
                Roboclub is...
            </p>

            <p class="bottom">
                {{ door_state.upper() }}
            </p>

            <p>(last updated {{ last_updated.strftime("%-I:%M %p, %b %-d") }})</p>

            <p>
                {% if door_state == "open" %}
                    This means there's an officer at the club, feel free to drop by :D
                {% elif door_state == "open" %}
                    Contact an officer if you would like to get into the club.
                {% endif %}
            </p>
        {% endif %}

        <p>Heatmap</p>
        <table>
            <tr>
                <th scope="col">Hour</th>
                <th scope="col">Sunday</th>
                <th scope="col">Monday</th>
                <th scope="col">Tuesday</th>
                <th scope="col">Wednesday</th>
                <th scope="col">Thursday</th>
                <th scope="col">Friday</th>
                <th scope="col">Saturday</th>
            </tr>

            {% for hour in range(0, 24) %}
                <tr>
                    <th scope="row">{{ "{:02}".format(hour) }}:00</th>

                    {% for day in [6, 0, 1, 2, 3, 4, 5] %}
                        {% set hex = "{:02x}".format(heatmap[day, hour]) %}
                        <td style="background: #{{ hex }}{{ hex }}{{ hex }}"></td>
                    {% endfor %}
                </tr>
            {% endfor %}
        </table>
    </div>
</body>
</html>
